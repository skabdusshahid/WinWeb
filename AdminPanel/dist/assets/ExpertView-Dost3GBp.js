import{r as s,j as e}from"./react-D74B1hbq.js";import{a as b}from"./axios-BimPEqV4.js";import{F as p,f as T,a as D,b as $}from"./@fortawesome-Bit3g1bh.js";/* empty css                  */import{H as d}from"./Http-BBBGMgZJ.js";import{S as G,A as R,C as z,R as P,a as v,B as _,M as c,F as a}from"./react-bootstrap-BTibWdUr.js";import"./classnames-H1cwLBKI.js";import"./prop-types-C6eKGBAC.js";import"./react-lifecycles-compat-B-eT57R9.js";import"./uncontrollable-DwyP4r6T.js";import"./@babel-DfNrjYUS.js";import"./@restart-B2Fkc3PD.js";import"./dom-helpers-BsN-Z0DW.js";import"./react-dom-DJ-eYT0o.js";import"./scheduler-CzFDRTuY.js";import"./react-transition-group-Ar7DaMhJ.js";const ne=()=>{const[x,j]=s.useState([]),[C,E]=s.useState(!0),[g,u]=s.useState(""),[L,h]=s.useState(!1),[w,F]=s.useState(null),[r,f]=s.useState({}),[o,y]=s.useState(null);s.useEffect(()=>{(async()=>{try{const{data:i}=await b.get(`${d}/experts`);j(i)}catch{u("Failed to fetch experts")}finally{E(!1)}})()},[]);const N=n=>{F(n),f({...n,image:`${d}/uploads/${k(n.image)}`}),h(!0)},t=n=>{const{name:i,value:m}=n.target;f(l=>({...l,[i]:m}))},I=n=>{y(n.target.files[0])},S=async n=>{n.preventDefault();try{const i=new FormData;i.append("name",r.name),i.append("designation",r.designation),i.append("phone",r.phone),i.append("fb_link",r.fb_link),i.append("x_link",r.x_link),i.append("linkedin_link",r.linkedin_link),o&&i.append("image",o),await b.put(`${d}/experts/${r._id}`,i,{headers:{"Content-Type":"multipart/form-data"}}),j(m=>m.map(l=>l._id===r._id?{...l,...r,image:o?URL.createObjectURL(o):l.image}:l)),h(!1)}catch(i){console.error("Error updating expert:",i.response?i.response.data:i.message),u("Failed to update expert")}},k=n=>n?n.replace(/\\/g,"/").split("/").pop():"";return C?e.jsx(G,{animation:"border"}):g?e.jsx(R,{variant:"danger",children:g}):e.jsxs("section",{id:"Team",className:"gap",children:[e.jsxs(z,{children:[e.jsxs("div",{className:"heading",children:[e.jsx("span",{children:"Dedicated To The People"}),e.jsx("h2",{children:"Meet Our Expert Team"})]}),e.jsx(P,{children:x.length===0?e.jsx(v,{children:e.jsx("p",{children:"No experts available."})}):x.map(n=>e.jsx(v,{lg:4,md:6,children:e.jsxs("div",{className:"team-text",children:[e.jsx("div",{className:"team-img",children:e.jsx("img",{alt:n.name,src:n.image?`${d}/uploads/${k(n.image)}`:"default-image-url",className:"img-fluid"})}),e.jsx("span",{children:n.designation}),e.jsx("h5",{children:n.name}),e.jsxs("div",{className:"callto",children:[e.jsx("i",{children:e.jsx("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:e.jsxs("g",{clipRule:"evenodd",fill:"rgb(0,0,0)",fillRule:"evenodd",children:[e.jsx("path",{d:"m7 2.75c-.41421 0-.75.33579-.75.75v17c0 .4142.33579.75.75.75h10c.4142 0 .75-.3358.75-.75v-17c0-.41421-.3358-.75-.75-.75zm-2.25.75c0-1.24264 1.00736-2.25 2.25-2.25h10c1.2426 0 2.25 1.00736 2.25 2.25v17c0 1.2426-1.0074 2.25-2.25 2.25h-10c-1.24264 0-2.25-1.0074-2.25-2.25z"}),e.jsx("path",{d:"m10.25 5c0-.41421.3358-.75.75-.75h2c.4142 0 .75.33579.75.75s-.3358.75-.75.75h-2c-.4142 0-.75-.33579-.75-.75z"}),e.jsx("path",{d:"m9.25 19c0-.4142.33579-.75.75-.75h4c.4142 0 .75.3358.75.75s-.3358.75-.75.75h-4c-.41421 0-.75-.3358-.75-.75z"})]})})}),e.jsx("a",{href:`tel:${n.phone}`,children:n.phone})]}),e.jsxs("div",{className:"follow",children:[e.jsxs("ul",{className:"social-media-icon",children:[n.fb_link&&e.jsx("li",{children:e.jsx("a",{href:n.fb_link,target:"_blank",rel:"noopener noreferrer",children:e.jsx(p,{icon:T,className:"icon"})})}),n.x_link&&e.jsx("li",{children:e.jsx("a",{href:n.x_link,target:"_blank",rel:"noopener noreferrer",children:e.jsx(p,{icon:D,className:"icon"})})}),n.linkedin_link&&e.jsx("li",{children:e.jsx("a",{href:n.linkedin_link,target:"_blank",rel:"noopener noreferrer",children:e.jsx(p,{icon:$,className:"icon"})})})]}),e.jsx(_,{variant:"warning",onClick:()=>N(n),children:"Edit"})]})]})},n._id))})]}),e.jsxs(c,{show:L,onHide:()=>h(!1),children:[e.jsx(c.Header,{closeButton:!0,children:e.jsx(c.Title,{children:"Edit Expert"})}),e.jsx(c.Body,{children:w&&e.jsxs(a,{onSubmit:S,children:[e.jsxs(a.Group,{controlId:"formName",children:[e.jsx(a.Label,{children:"Name"}),e.jsx(a.Control,{type:"text",placeholder:"Enter name",name:"name",value:r.name||"",onChange:t})]}),e.jsxs(a.Group,{controlId:"formDesignation",children:[e.jsx(a.Label,{children:"Designation"}),e.jsx(a.Control,{type:"text",placeholder:"Enter designation",name:"designation",value:r.designation||"",onChange:t})]}),e.jsxs(a.Group,{controlId:"formImage",children:[e.jsx(a.Label,{children:"Image"}),e.jsx(a.Control,{type:"file",onChange:I}),r.image&&e.jsx("img",{src:r.image,alt:"Preview",className:"img-fluid mt-2"})," "]}),e.jsxs(a.Group,{controlId:"formPhone",children:[e.jsx(a.Label,{children:"Phone"}),e.jsx(a.Control,{type:"text",placeholder:"Enter phone number",name:"phone",value:r.phone||"",onChange:t})]}),e.jsxs(a.Group,{controlId:"formFbLink",children:[e.jsx(a.Label,{children:"Facebook Link"}),e.jsx(a.Control,{type:"text",placeholder:"Enter Facebook link",name:"fb_link",value:r.fb_link||"",onChange:t})]}),e.jsxs(a.Group,{controlId:"formXLink",children:[e.jsx(a.Label,{children:"Twitter Link"}),e.jsx(a.Control,{type:"text",placeholder:"Enter Twitter link",name:"x_link",value:r.x_link||"",onChange:t})]}),e.jsxs(a.Group,{controlId:"formLinkedinLink",children:[e.jsx(a.Label,{children:"LinkedIn Link"}),e.jsx(a.Control,{type:"text",placeholder:"Enter LinkedIn link",name:"linkedin_link",value:r.linkedin_link||"",onChange:t})]}),e.jsx(_,{variant:"primary",type:"submit",children:"Save Changes"})]})})]})]})};export{ne as default};
