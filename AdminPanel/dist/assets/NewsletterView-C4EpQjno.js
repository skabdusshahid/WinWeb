import{r as c,j as e}from"./react-D74B1hbq.js";import{a as g}from"./axios-BimPEqV4.js";import{H as N}from"./Http-BBBGMgZJ.js";import"./classnames-H1cwLBKI.js";const E=()=>{const[r,m]=c.useState([]),[u,x]=c.useState(""),[h,d]=c.useState(null),[t,o]=c.useState({title:"",subTitle:"",discountDesc:"",desc:"",ButtonText:"",Img:""});c.useEffect(()=>{(async()=>{var a,n;try{const l=await g.get(`${N}/newsletter`);m(l.data.data)}catch(l){x("Error fetching newsletters: "+(((n=(a=l.response)==null?void 0:a.data)==null?void 0:n.message)||"Unknown error"))}})()},[]);const v=s=>{d(s),o({title:s.title,subTitle:s.subTitle,discountDesc:s.discountDesc,desc:s.desc,ButtonText:s.ButtonText,Img:s.Img})},i=s=>{const{name:a,value:n}=s.target;o({...t,[a]:n})},b=async s=>{var a,n;s.preventDefault();try{const p=(await g.put(`${N}/newsletter/${h._id}`,t)).data.data;m(r.map(j=>j._id===p._id?p:j)),d(null),o({title:"",subTitle:"",discountDesc:"",desc:"",ButtonText:"",Img:""})}catch(l){x("Error updating newsletter: "+(((n=(a=l.response)==null?void 0:a.data)==null?void 0:n.message)||"Unknown error"))}};return e.jsx("div",{className:"newsletter-view-container",children:e.jsx("section",{className:"newsletter-view-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"title",children:"Newsletter List"}),u&&e.jsx("p",{className:"error-message",children:u}),r.length===0?e.jsx("p",{className:"no-newsletters",children:"No newsletters available."}):e.jsx("div",{className:"newsletter-list",children:r.map(s=>e.jsxs("div",{className:"row align-items-center newsletter-card",children:[e.jsx("div",{className:"col-lg-7",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"paper-plane-w",children:e.jsx("img",{alt:"paper-plane",src:"assets/img/paper-plane.png"})})}),e.jsx("div",{className:"col-md-9",children:e.jsxs("div",{className:"newsletter-text",children:[e.jsx("h2",{children:s.title}),e.jsxs("h4",{children:[s.subTitle," ",e.jsx("span",{children:s.discountDesc})]}),e.jsx("h6",{children:s.desc}),e.jsx("a",{href:"#",className:"btn",children:s.ButtonText})]})})]})}),e.jsx("div",{className:"col-lg-5",children:e.jsx("div",{className:"customize-img",children:e.jsx("img",{alt:"customize",src:s.Img})})}),e.jsx("div",{className:"newsletter-buttons",children:e.jsx("button",{className:"edit-btn",onClick:()=>v(s),children:"Edit"})})]},s._id))}),h&&e.jsxs("div",{className:"edit-form-container",children:[e.jsx("h2",{children:"Edit Newsletter"}),e.jsxs("form",{className:"edit-form",onSubmit:b,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title:"}),e.jsx("input",{type:"text",name:"title",value:t.title,onChange:i,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"SubTitle:"}),e.jsx("input",{type:"text",name:"subTitle",value:t.subTitle,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Discount Description:"}),e.jsx("input",{type:"text",name:"discountDesc",value:t.discountDesc,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description:"}),e.jsx("textarea",{name:"desc",value:t.desc,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Button Text:"}),e.jsx("input",{type:"text",name:"ButtonText",value:t.ButtonText,onChange:i})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image URL:"}),e.jsx("input",{type:"text",name:"Img",value:t.Img,onChange:i})]}),e.jsx("button",{type:"submit",className:"save-btn",children:"Save Changes"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>d(null),children:"Cancel"})]})]})]})})})};export{E as default};
