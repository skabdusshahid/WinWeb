import{r as o,j as t}from"./react-D74B1hbq.js";import{a as r}from"./axios-BimPEqV4.js";import{H as l}from"./Http-BBBGMgZJ.js";import"./classnames-H1cwLBKI.js";const $=()=>{const[d,u]=o.useState([]),[c,x]=o.useState([]),[a,h]=o.useState(null),[s,m]=o.useState(null);o.useEffect(()=>{const e=async()=>{try{const i=await r.get(`${l}/testimonials-header`);u(i.data)}catch(i){console.error("Error fetching testimonials header:",i)}},n=async()=>{try{const i=await r.get(`${l}/testimonials`);x(i.data)}catch(i){console.error("Error fetching testimonials:",i)}};e(),n()},[]);const j=async e=>{try{await r.delete(`${l}/testimonials-header/${e}`),u(d.filter(n=>n._id!==e)),alert("Header deleted successfully")}catch(n){console.error("Error deleting header:",n),alert("Error deleting header")}},T=async e=>{try{await r.delete(`${l}/testimonials/${e}`),x(c.filter(n=>n._id!==e)),alert("Testimonial deleted successfully")}catch(n){console.error("Error deleting testimonial:",n),alert("Error deleting testimonial")}},E=e=>{h(e)},y=e=>{m(e)},C=async()=>{try{await r.put(`${l}/testimonials-header/${a._id}`,a),u(d.map(e=>e._id===a._id?a:e)),h(null),alert("Header updated successfully")}catch(e){console.error("Error updating header:",e),alert("Error updating header")}},H=async()=>{try{await r.put(`${l}/testimonials/${s._id}`,s),x(c.map(e=>e._id===s._id?s:e)),m(null),alert("Testimonial updated successfully")}catch(e){console.error("Error updating testimonial:",e),alert("Error updating testimonial")}},g=e=>{const{name:n,value:i}=e.target;h({...a,[n]:i})},p=e=>{const{name:n,value:i}=e.target;m({...s,[n]:i})};return t.jsxs("div",{children:[t.jsx("h2",{children:"Testimonials Header"}),d.length>0?d.map(e=>t.jsxs("div",{children:[t.jsxs("h1",{children:["Testimonial Title: ",e.title]}),t.jsxs("h2",{children:["Testimonial SubTitle: ",e.subTitle]}),t.jsx("button",{onClick:()=>E(e),children:"Edit Header"}),t.jsx("button",{onClick:()=>j(e._id),children:"Delete Header"})]},e._id)):t.jsx("p",{children:"No testimonials header available."}),a&&t.jsxs("div",{children:[t.jsx("h3",{children:"Edit Header"}),t.jsx("input",{type:"text",name:"title",value:a.title,onChange:g}),t.jsx("input",{type:"text",name:"subTitle",value:a.subTitle,onChange:g}),t.jsx("button",{onClick:C,children:"Update Header"}),t.jsx("button",{onClick:()=>h(null),children:"Cancel"})]}),t.jsxs("div",{children:[t.jsx("h3",{children:"Testimonials"}),c.length===0?t.jsx("p",{children:"No testimonials available."}):c.map(e=>t.jsxs("div",{children:[t.jsxs("h5",{children:["Client Name: ",e.clientName]}),t.jsxs("h6",{children:["Client Designation: ",e.clientDesignation]}),t.jsxs("p",{children:["Testimonial Message: ",e.message]}),t.jsx("button",{onClick:()=>y(e),children:"Edit Testimonial"}),t.jsx("button",{onClick:()=>T(e._id),children:"Delete"})]},e._id))]}),s&&t.jsxs("div",{children:[t.jsx("h3",{children:"Edit Testimonial"}),t.jsx("input",{type:"text",name:"clientName",value:s.clientName,onChange:p}),t.jsx("input",{type:"text",name:"clientDesignation",value:s.clientDesignation,onChange:p}),t.jsx("textarea",{name:"message",value:s.message,onChange:p}),t.jsx("button",{onClick:H,children:"Update Testimonial"}),t.jsx("button",{onClick:()=>m(null),children:"Cancel"})]})]})};export{$ as default};
