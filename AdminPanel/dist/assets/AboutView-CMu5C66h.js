import{r as l,j as e}from"./react-D74B1hbq.js";import{a as M}from"./axios-BimPEqV4.js";import{H as R}from"./Http-BBBGMgZJ.js";/* empty css                  */import"./classnames-H1cwLBKI.js";const F=({isOpen:j,onClose:v,currentData:i,onSave:N})=>{const[m,d]=l.useState(""),[x,u]=l.useState(""),[h,g]=l.useState(""),[c,A]=l.useState(""),[p,b]=l.useState([]),[r,t]=l.useState(null),[s,o]=l.useState(null),[E,I]=l.useState(null);l.useEffect(()=>{i&&(d(i.title||""),u(i.subtitle||""),g(i.description||""),b(i.tags||[]),t(null),o(null))},[i]),l.useEffect(()=>(r&&o(URL.createObjectURL(r)),()=>{s&&URL.revokeObjectURL(s)}),[r,s]);const f=()=>{c.trim()&&!p.includes(c.trim())&&(b(a=>[...a,c.trim()]),A(""))},y=a=>{a.key==="Enter"&&(a.preventDefault(),f())},S=a=>{b(n=>n.filter((G,C)=>C!==a))},k=async()=>{if(!m||!h){I("Title and description are required.");return}try{const a=new FormData;a.append("title",m),a.append("subtitle",x),a.append("description",h),a.append("tags",JSON.stringify(p)),r&&a.append("image",r),await M.put(`${R}/about/${i._id}`,a,{headers:{"Content-Type":"multipart/form-data"}}),I(null),N(),v()}catch(a){a.response&&a.response.data&&a.response.data.message?I(a.response.data.message):I("Failed to save changes")}},D=a=>{const n=a.target.files[0];t(n),o(n?URL.createObjectURL(n):null)},w=()=>{t(null),o(null),v()};return j?e.jsx("div",{className:"modal-overlay",role:"dialog","aria-labelledby":"modal-title","aria-modal":"true",children:e.jsxs("div",{className:"modal-content","aria-labelledby":"modal-title",children:[e.jsx("h2",{id:"modal-title",children:"Edit About Information"}),E&&e.jsx("div",{className:"error-message",children:E}),e.jsxs("label",{children:["Title:",e.jsx("input",{type:"text",value:m,onChange:a=>d(a.target.value),required:!0})]}),e.jsxs("label",{children:["Subtitle:",e.jsx("input",{type:"text",value:x,onChange:a=>u(a.target.value)})]}),e.jsxs("label",{children:["Description:",e.jsx("textarea",{value:h,onChange:a=>g(a.target.value),required:!0})]}),e.jsxs("label",{children:["Tags:",e.jsxs("div",{className:"tags-input",children:[e.jsx("input",{type:"text",value:c,onChange:a=>A(a.target.value),onKeyPress:y,placeholder:"Press Enter to add tags"}),e.jsx("button",{type:"button",onClick:f,className:"add-tag-button",children:"Add Tag"})]}),p.length>0&&e.jsx("ul",{className:"tags-list",children:p.map((a,n)=>e.jsxs("li",{className:"tag-item",children:[a," ",e.jsx("button",{type:"button",onClick:()=>S(n),className:"remove-tag-button",children:"Remove"})]},n))})]}),e.jsxs("label",{children:["Image:",e.jsx("input",{type:"file",onChange:D}),s&&e.jsxs("div",{className:"image-preview",children:[e.jsx("h3",{children:"Image Preview:"}),e.jsx("img",{src:s,alt:"Image Preview",className:"preview-image"}),e.jsx("button",{type:"button",onClick:()=>{t(null),o(null)},className:"remove-image-button",children:"Remove Image"})]})]}),e.jsx("button",{onClick:k,className:"save-button",children:"Save"}),e.jsx("button",{onClick:w,className:"cancel-button",children:"Cancel"})]})}):null},U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMS1jMDAwIDc5LmRhYmFjYmIsIDIwMjEvMDQvMTQtMDA6Mzk6NDQgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6Q0VEQURGOThEMzFDMTFFRDk1QkU4Mjk5RjQ0NkJCN0UiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0QwQ0E5REEyMjRGMTFFRkEyODhCRUExMERDNjRBODMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0QwQ0E5RDkyMjRGMTFFRkEyODhCRUExMERDNjRBODMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIzLjAgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTEyYmFhMWItMjJkMS1mNDRjLThjMjYtZTI5OTNmYjBkM2Q4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkNFREFERjk4RDMxQzExRUQ5NUJFODI5OUY0NDZCQjdFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+q4vfDwAAAGtJREFUeNpi/P//PwMlgOVnoiupemA2MoIIJjI1w9lMZGqGizFRoJmBWBfgDWUWXIFDhGaUQPyPRRNBzTAD/pPobEZSwwCnZlINYMQVC4zkakZ2ASM5mtG9wEiqZmxhwEiKZrAiSrMzQIABAMv/Fb1+0cmyAAAAAElFTkSuQmCC",T=()=>{const[j,v]=l.useState([]),[i,N]=l.useState(!0),[m,d]=l.useState(null),[x,u]=l.useState(null),[h,g]=l.useState(!1),c=async()=>{N(!0);try{const t=await M.get(`${R}/about`);v(t.data)}catch{d("Failed to fetch data")}finally{N(!1)}};l.useEffect(()=>{c()},[]);const A=t=>{u(t),g(!0)},p=()=>{g(!1),u(null)},b=async t=>{try{const s=new FormData;s.append("title",t.title),s.append("subtitle",t.subtitle),s.append("description",t.description),s.append("tags",JSON.stringify(t.tags)),t.image&&s.append("image",t.image),await M.put(`${R}/about/${t._id}`,s,{headers:{"Content-Type":"multipart/form-data"}}),c(),g(!1),u(null),d(null)}catch{d("Failed to save changes")}};if(i)return e.jsx("div",{className:"loading",children:"Loading..."});if(m)return e.jsx("div",{className:"error",children:m});if(j.length===0)return e.jsx("div",{className:"no-data",children:"No data available"});const r=t=>t.replace(/\\/g,"/").split("/").pop();return e.jsx("section",{id:"AboutView",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"heading",children:"About Information"}),j.map(t=>e.jsx("div",{className:"card mb-4",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-lg-7",children:t.image&&e.jsx("div",{className:"image-container mb-3",children:e.jsx("img",{src:`${R}/uploads/${r(t.image)}`,alt:"About",className:"img-fluid"})})}),e.jsx("div",{className:"col-lg-5",children:e.jsxs("div",{className:"content",children:[e.jsx("h2",{className:"title",children:t.title||"No title available"}),e.jsx("h3",{className:"subtitle",children:t.subtitle||"No subtitle available"}),e.jsx("p",{className:"description",children:t.description||"No description available"}),Array.isArray(t.tags)&&t.tags.length>0?e.jsx("ul",{className:"list-unstyled",children:t.tags.map((s,o)=>e.jsxs("li",{className:"tag-item",children:[e.jsx("img",{alt:"check",src:U,className:"check-icon"}),s]},o))}):e.jsx("span",{children:"No tags"}),e.jsx("div",{className:"actions mt-3",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>A(t),children:"Edit"})})]})})]})},t._id)),h&&e.jsx(F,{isOpen:h,onClose:p,currentData:x,onSave:b})]})})};export{T as default};
