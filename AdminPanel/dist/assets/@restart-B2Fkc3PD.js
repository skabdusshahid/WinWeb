import{r,j as h}from"./react-D74B1hbq.js";import{c as U,s as Q,o as xe,a as I,l as Y,b as Z}from"./dom-helpers-BsN-Z0DW.js";import{R as Re}from"./react-dom-DJ-eYT0o.js";const ee=e=>!e||typeof e=="function"?e:n=>{e.current=n};function ye(e,n){const t=ee(e),o=ee(n);return i=>{t&&t(i),o&&o(i)}}function _(e,n){return r.useMemo(()=>ye(e,n),[e,n])}function we(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e},[e]),n}function g(e){const n=we(e);return r.useCallback(function(...t){return n.current&&n.current(...t)},[n])}function un(){return r.useState(null)}function Oe(){const e=r.useRef(!0),n=r.useRef(()=>e.current);return r.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),n.current}function je(e){const n=r.useRef(null);return r.useEffect(()=>{n.current=e}),n.current}const ke=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Te=typeof document<"u",ne=Te||ke?r.useLayoutEffect:r.useEffect,Ce=["as","disabled"];function Me(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}function De(e){return!e||e.trim()==="#"}function re({tagName:e,disabled:n,href:t,target:o,rel:i,role:s,onClick:c,tabIndex:m=0,type:d}){e||(t!=null||o!=null||i!=null?e="a":e="button");const a={tagName:e};if(e==="button")return[{type:d||"button",disabled:n},a];const p=f=>{if((n||e==="a"&&De(t))&&f.preventDefault(),n){f.stopPropagation();return}c==null||c(f)},b=f=>{f.key===" "&&(f.preventDefault(),p(f))};return e==="a"&&(t||(t="#"),n&&(t=void 0)),[{role:s??"button",disabled:void 0,tabIndex:n?void 0:m,href:t,target:e==="a"?o:void 0,"aria-disabled":n||void 0,rel:e==="a"?i:void 0,onClick:p,onKeyDown:b},a]}const Be=r.forwardRef((e,n)=>{let{as:t,disabled:o}=e,i=Me(e,Ce);const[s,{tagName:c}]=re(Object.assign({tagName:t,disabled:o},i));return h.jsx(c,Object.assign({},i,s,{ref:n}))});Be.displayName="Button";const Pe=["onKeyDown"];function We(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}function Ae(e){return!e||e.trim()==="#"}const Fe=r.forwardRef((e,n)=>{let{onKeyDown:t}=e,o=We(e,Pe);const[i]=re(Object.assign({tagName:"a"},o)),s=g(c=>{i.onKeyDown(c),t==null||t(c)});return Ae(o.href)||o.role==="button"?h.jsx("a",Object.assign({ref:n},o,i,{onKeyDown:s})):h.jsx("a",Object.assign({ref:n},o,{onKeyDown:t}))});Fe.displayName="Anchor";function Le(e){const n=r.useRef(e);return n.current=e,n}function Se(e){const n=Le(e);r.useEffect(()=>()=>n.current(),[])}const Ke="data-rr-ui-";function Ie(e){return`${Ke}${e}`}const ie=r.createContext(U?window:void 0);ie.Provider;function N(){return r.useContext(ie)}function $e(e=document){const n=e.defaultView;return Math.abs(n.innerWidth-e.documentElement.clientWidth)}const te=Ie("modal-open");class se{constructor({ownerDocument:n,handleContainerOverflow:t=!0,isRTL:o=!1}={}){this.handleContainerOverflow=t,this.isRTL=o,this.modals=[],this.ownerDocument=n}getScrollbarWidth(){return $e(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(n){}removeModalAttributes(n){}setContainerStyle(n){const t={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();n.style={overflow:i.style.overflow,[o]:i.style[o]},n.scrollBarWidth&&(t[o]=`${parseInt(Q(i,o)||"0",10)+n.scrollBarWidth}px`),i.setAttribute(te,""),Q(i,t)}reset(){[...this.modals].forEach(n=>this.remove(n))}removeContainerStyle(n){const t=this.getElement();t.removeAttribute(te),Object.assign(t.style,n.style)}add(n){let t=this.modals.indexOf(n);return t!==-1||(t=this.modals.length,this.modals.push(n),this.setModalAttributes(n),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(n){const t=this.modals.indexOf(n);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(n))}isTopModal(n){return!!this.modals.length&&this.modals[this.modals.length-1]===n}}const $=(e,n)=>U?e==null?(n||xe()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function He(e,n){const t=N(),[o,i]=r.useState(()=>$(e,t==null?void 0:t.document));if(!o){const s=$(e);s&&i(s)}return r.useEffect(()=>{},[n,o]),r.useEffect(()=>{const s=$(e);s!==o&&i(s)},[e,o]),o}function Ue({children:e,in:n,onExited:t,mountOnEnter:o,unmountOnExit:i}){const s=r.useRef(null),c=r.useRef(n),m=g(t);r.useEffect(()=>{n?c.current=!0:m(s.current)},[n,m]);const d=_(s,e.ref),a=r.cloneElement(e,{ref:d});return n?a:i||!c.current&&o?null:a}function _e(e){return e.code==="Escape"||e.keyCode===27}function Ne(){const e=r.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}const Ge=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Ve(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}function ze(e){let{onEnter:n,onEntering:t,onEntered:o,onExit:i,onExiting:s,onExited:c,addEndListener:m,children:d}=e,a=Ve(e,Ge);const{major:p}=Ne(),b=p>=19?d.props.ref:d.ref,f=r.useRef(null),y=_(f,typeof d=="function"?null:b),E=v=>x=>{v&&f.current&&v(f.current,x)},T=r.useCallback(E(n),[n]),C=r.useCallback(E(t),[t]),M=r.useCallback(E(o),[o]),D=r.useCallback(E(i),[i]),w=r.useCallback(E(s),[s]),B=r.useCallback(E(c),[c]),P=r.useCallback(E(m),[m]);return Object.assign({},a,{nodeRef:f},n&&{onEnter:T},t&&{onEntering:C},o&&{onEntered:M},i&&{onExit:D},s&&{onExiting:w},c&&{onExited:B},m&&{addEndListener:P},{children:typeof d=="function"?(v,x)=>d(v,Object.assign({},x,{ref:y})):r.cloneElement(d,{ref:y})})}const Xe=["component"];function qe(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}const Je=r.forwardRef((e,n)=>{let{component:t}=e,o=qe(e,Xe);const i=ze(o);return h.jsx(t,Object.assign({ref:n},i))});function Qe({in:e,onTransition:n}){const t=r.useRef(null),o=r.useRef(!0),i=g(n);return ne(()=>{if(!t.current)return;let s=!1;return i({in:e,element:t.current,initial:o.current,isStale:()=>s}),()=>{s=!0}},[e,i]),ne(()=>(o.current=!1,()=>{o.current=!0}),[]),t}function Ye({children:e,in:n,onExited:t,onEntered:o,transition:i}){const[s,c]=r.useState(!n);n&&s&&c(!1);const m=Qe({in:!!n,onTransition:a=>{const p=()=>{a.isStale()||(a.in?o==null||o(a.element,a.initial):(c(!0),t==null||t(a.element)))};Promise.resolve(i(a)).then(p,b=>{throw a.in||c(!0),b})}}),d=_(m,e.ref);return s&&!n?null:r.cloneElement(e,{ref:d})}function oe(e,n,t){return e?h.jsx(Je,Object.assign({},t,{component:e})):n?h.jsx(Ye,Object.assign({},t,{transition:n})):h.jsx(Ue,Object.assign({},t))}const Ze=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function en(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}let H;function nn(e){return H||(H=new se({ownerDocument:e==null?void 0:e.document})),H}function tn(e){const n=N(),t=e||nn(n),o=r.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>t.add(o.current),remove:()=>t.remove(o.current),isTopModal:()=>t.isTopModal(o.current),setDialogRef:r.useCallback(i=>{o.current.dialog=i},[]),setBackdropRef:r.useCallback(i=>{o.current.backdrop=i},[])})}const ue=r.forwardRef((e,n)=>{let{show:t=!1,role:o="dialog",className:i,style:s,children:c,backdrop:m=!0,keyboard:d=!0,onBackdropClick:a,onEscapeKeyDown:p,transition:b,runTransition:f,backdropTransition:y,runBackdropTransition:E,autoFocus:T=!0,enforceFocus:C=!0,restoreFocus:M=!0,restoreFocusOptions:D,renderDialog:w,renderBackdrop:B=u=>h.jsx("div",Object.assign({},u)),manager:P,container:v,onShow:x,onHide:G=()=>{},onExit:ce,onExited:V,onExiting:ae,onEnter:le,onEntering:de,onEntered:fe}=e,me=en(e,Ze);const R=N(),O=He(v),l=tn(P),he=Oe(),pe=je(t),[W,z]=r.useState(!t),j=r.useRef(null);r.useImperativeHandle(n,()=>l,[l]),U&&!pe&&t&&(j.current=I(R==null?void 0:R.document)),t&&W&&z(!1);const X=g(()=>{if(l.add(),L.current=Y(document,"keydown",be),F.current=Y(document,"focus",()=>setTimeout(Ee),!0),x&&x(),T){var u,J;const K=I((u=(J=l.dialog)==null?void 0:J.ownerDocument)!=null?u:R==null?void 0:R.document);l.dialog&&K&&!Z(l.dialog,K)&&(j.current=K,l.dialog.focus())}}),A=g(()=>{if(l.remove(),L.current==null||L.current(),F.current==null||F.current(),M){var u;(u=j.current)==null||u.focus==null||u.focus(D),j.current=null}});r.useEffect(()=>{!t||!O||X()},[t,O,X]),r.useEffect(()=>{W&&A()},[W,A]),Se(()=>{A()});const Ee=g(()=>{if(!C||!he()||!l.isTopModal())return;const u=I(R==null?void 0:R.document);l.dialog&&u&&!Z(l.dialog,u)&&l.dialog.focus()}),ge=g(u=>{u.target===u.currentTarget&&(a==null||a(u),m===!0&&G())}),be=g(u=>{d&&_e(u)&&l.isTopModal()&&(p==null||p(u),u.defaultPrevented||G())}),F=r.useRef(),L=r.useRef(),ve=(...u)=>{z(!0),V==null||V(...u)};if(!O)return null;const q=Object.assign({role:o,ref:l.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},me,{style:s,className:i,tabIndex:-1});let S=w?w(q):h.jsx("div",Object.assign({},q,{children:r.cloneElement(c,{role:"document"})}));S=oe(b,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:ce,onExiting:ae,onExited:ve,onEnter:le,onEntering:de,onEntered:fe,children:S});let k=null;return m&&(k=B({ref:l.setBackdropRef,onClick:ge}),k=oe(y,E,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:k})),h.jsx(h.Fragment,{children:Re.createPortal(h.jsxs(h.Fragment,{children:[k,S]}),O)})});ue.displayName="Modal";const cn=Object.assign(ue,{Manager:se});export{Fe as A,cn as B,se as M,g as a,re as b,un as c,Se as d,_ as u};
